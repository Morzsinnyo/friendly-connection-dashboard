
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>friendly-connection-dashboard</title>
    <meta name="description" content="Lovable Generated Project" />
    <meta name="author" content="Lovable" />
    <meta property="og:image" content="/og-image.png" />
    <!-- Allow iframe embedding -->
    <meta http-equiv="Content-Security-Policy" content="frame-ancestors 'self' https://*.lovable.ai https://*.lovable.dev http://localhost:* https://localhost:*;">
    <script>
      // Simple check to verify JavaScript is executing
      console.log('JavaScript is running in the document head');
      window.__JS_CHECK = true;
      
      // Add error handling for script loading
      window.addEventListener('error', function(event) {
        console.error('Script loading error:', event.message);
        document.getElementById('loading-status')?.textContent = 'Error loading scripts: ' + event.message;
      }, true);
    </script>
  </head>

  <body>
    <div id="root">
      <!-- Fallback content if React doesn't render -->
      <div id="loading-fallback" style="display: flex; justify-content: center; align-items: center; height: 100vh; font-family: sans-serif;">
        <div style="text-align: center;">
          <p>Loading application...</p>
          <p id="loading-status">Starting JavaScript...</p>
          <noscript>
            <p style="color: #e11d48;">JavaScript is required to run this application.</p>
          </noscript>
        </div>
      </div>
    </div>
    <!-- GPT Engineer script for the "Select" feature -->
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <!-- Main application script -->
    <script type="module" src="/src/main.tsx"></script>
    <script>
      // Check if scripts are loading properly
      console.log('Bottom of body script executed');
      
      if (document.getElementById('loading-status')) {
        document.getElementById('loading-status').textContent = 'Scripts loaded. Initializing React...';
      }
      
      // Set a timeout to detect if React doesn't initialize
      setTimeout(function() {
        if (!window.__REACT_INITIALIZED && document.getElementById('loading-fallback')) {
          console.error('React failed to initialize after timeout');
          if (document.getElementById('loading-status')) {
            document.getElementById('loading-status').textContent = 
              'App initialization timed out. Please check console for errors or refresh the page.';
          }
        }
      }, 5000);
      
      // Special handling for iframe scenarios
      if (window !== window.parent) {
        console.log('Running in iframe, adding special handling');
        // Force a re-render after a delay in case of iframe loading issues
        setTimeout(function() {
          if (!window.__REACT_INITIALIZED) {
            console.log('Iframe delayed loading - forcing script reload');
            const script = document.createElement('script');
            script.type = 'module';
            script.src = '/src/main.tsx?force=' + Date.now();
            document.body.appendChild(script);
          }
        }, 2000);
      }
    </script>
  </body>
</html>
